<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Analyse 3D biological image data especially neurons — nat-package • nat</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Analyse 3D biological image data especially neurons — nat-package" />

<meta property="og:description" content="nat provides tools to read, analyse, plot, transform and convert 
neuroanatomical data, especially representations of neurons." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.9.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Installation.html">Installation details</a>
    </li>
    <li>
      <a href="../articles/NeuroGeometry.html">NeuroGeometry: Analysing 3D morphology of neurons</a>
    </li>
    <li>
      <a href="../articles/neurons-as-graph.html">Working with individual neurons as graph structures</a>
    </li>
    <li>
      <a href="../articles/neurons-intro.html">Introduction to neurons and neuronlists</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/Installation.html">Installation</a>
</li>
<li>
  <a href="../index.html#learn">Learn</a>
</li>
<li>
  <a href="../index.html#help">Help</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://natverse.github.io">natverse</a>
</li>
<li>
  <a href="https://github.com/natverse/nat">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Analyse 3D biological image data especially neurons</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/nat/blob/master/R/nat-package.R'><code>R/nat-package.R</code></a></small>
    <div class="hidden name"><code>nat-package.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><b>nat</b> provides tools to read, analyse, plot, transform and convert 
neuroanatomical data, especially representations of neurons.</p>
    
    </div>

        
    <h2 class="hasAnchor" id="neuron-objects"><a class="anchor" href="#neuron-objects"></a>Neuron Objects</h2>

    <p>At present there are 2 main representations of 
  neuronal data:</p>  
<p></p><ul>
<li><p><code><a href='neuron.html'>neuron</a></code> objects contain one or more connected trees 
  that make up a neuron</p></li>
<li><p><code><a href='dotprops.html'>dotprops</a></code> objects can contain one (or more) neurons 
  represented as points and tangent vectors in which the connectivity 
  information has been discarded</p></li>
</ul>
    <p>The <code>subset</code> function has both <code><a href='subset.neuron.html'>subset.neuron</a></code> and 
  <code><a href='subset.dotprops.html'>subset.dotprops</a></code> methods, which can be used to keep (or 
  reject) specified vertices within a neuron e.g. by spatial constraints. 
  <code><a href='subset.neuron.html'>subset.neuron</a></code> will look after the tree structure of neurons 
  in these circumstances.</p>  
<p><code>neuron</code> objects containing connected trees can be converted to 
  <code><a href='ngraph.html'>ngraph</a></code> objects, a lightweight wrapper around the 
  <code>igraph</code> library's <code><a href='https://www.rdocumentation.org/packages/igraph/topics/make_graph'>graph</a></code> class that 
  preserves 3D coordinate information. This allows neurons to be manipulated 
  based on their graph structure, e.g. by finding all nodes upstream (closer 
  to the root) or downstream of a given node. The <code><a href='neuron.html'>as.neuron</a></code> 
  function can convert <code>ngraph</code> objects back to <code>neuron</code>s or 
  selected vertex indices can be used to subset a neuron with 
  <code><a href='subset.neuron.html'>subset.neuron</a></code>.</p>
    
    <h2 class="hasAnchor" id="collections-of-neurons"><a class="anchor" href="#collections-of-neurons"></a>Collections of Neurons</h2>

    <p>Neurons can be collected as 
  <code><a href='neuronlist.html'>neuronlist</a></code> objects, which contain multiple 
  <code><a href='neuron.html'>neuron</a></code> or <code>dotprops</code> objects along with an attached 
  dataframe of metadata. The metadata can be accessed and manipulated using 
  the <code>myneuronlist[i,j]</code> notation (see 
  <code><a href='neuronlist-dataframe-methods.html'>neuronlist-dataframe-methods</a></code>).</p>  
<p>Neurons can be read in to a neuronlist using <code><a href='read.neurons.html'>read.neurons</a></code> or 
  written out using <code><a href='write.neurons.html'>write.neurons</a></code> with support for many of the 
  most common formats including swc.</p>  
<p>Metadata can be used to colour or subset the neurons during plotting (see
  <code><a href='plot3d.neuronlist.html'>plot3d.neuronlist</a></code> and <code><a href='subset.neuronlist.html'>subset.neuronlist</a></code>).
  Interactive 3D selection of neurons in a neuronlist is also possible using
  <code><a href='find.neuron.html'>find.neuron</a></code> (which makes use of <code>rgl</code>'s
  <code>select3d</code> function.</p>  
<p><code>neuronlist</code> objects also provide additional functionality to 
  streamline arithmetic (e.g. scaling all the points in all neurons see 
  <code><a href='neuronlist-arithmetic.html'>*.neuronlist</a></code>) and transformations (see <b>Transformations</b>
  section below and <code><a href='xform.html'>xform</a></code>). Arbitrary functions can be applied 
  to each individual neuron can be applied using the <code><a href='nlapply.html'>nlapply</a></code> 
  function, which also provides options for progress bars and simple 
  parallelisation.</p>
    
    <h2 class="hasAnchor" id="transformations"><a class="anchor" href="#transformations"></a>Transformations</h2>

    <p><code><a href='neuron.html'>neuron</a></code> or <code><a href='dotprops.html'>dotprops</a></code> 
  objects can be transformed from e.g. sample to template brain space using 
  affine or non-rigid registrations, typically calculated with the open 
  source CMTK package available at <a href='www.nitrc.org/projects/cmtk/'>www.nitrc.org/projects/cmtk/</a>, see 
  ?<a href='cmtk.bindir.html'>cmtk</a> for installation details. The function <code><a href='xform.html'>xform</a></code> has
  methods to deal with a variety of types of interest.</p>
    
    <h2 class="hasAnchor" id="-d-image-data"><a class="anchor" href="#-d-image-data"></a>3D Image Data</h2>

    <p>In addition to data types defined by unstructured 
  collections of 3D vertices such as <code><a href='neuron.html'>neuron</a></code>, 
  <code><a href='dotprops.html'>dotprops</a></code> and <code><a href='read.hxsurf.html'>hxsurf</a></code> objects nat provides the 
  <code><a href='im3d.html'>im3d</a></code> class to handle image/density data on a regular grid. 
  I/O is handled by <code><a href='im3d-io.html'>read.im3d</a></code> and <code><a href='im3d-io.html'>write.im3d</a></code>, 
  which are currently implemented for the AmiraMesh and NRRD file formats; 
  there is also read only access to the <a href='www.vaa3d.org/'>vaa3d</a> raw 
  format.</p>  
<p>Spatial information can be queried with <code><a href='voxdims.html'>voxdims</a></code>, 
  <code><a href='boundingbox.html'>boundingbox</a></code> and <code><a href='im3d-coords.html'>ijkpos</a></code>, <code><a href='im3d-coords.html'>xyzpos</a></code>
  methods. You can convert between voxel data and coordinate (vertex) -based 
  representations using the following functions:</p>  
<p></p><ul>
<li><p><code><a href='as.im3d.html'>as.im3d</a></code> The <code>as.im3d.matrix</code> method converts XYZ 
  coordinates to an <code>im3d</code> image volume</p></li>
<li><p><code><a href='ind2coord.html'>ind2coord</a></code> Find XYZ coordinates of specified voxels of 
  an <code>im3d</code> image volume</p></li>
<li><p><code><a href='dotprops.html'>dotprops</a></code> The <code>dotprops.im3d</code> method converts an 
  <code>im3d</code> object to a <code>dotprops</code> format neuron, i.e. a cloud of 
  unconnected segments.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="surface-data"><a class="anchor" href="#surface-data"></a>Surface Data</h2>

    <p><b>nat</b> can read, write, transform and subset 
  surface (mesh) objects defined by Amira's HxSurface class. See 
  <code><a href='read.hxsurf.html'>read.hxsurf</a></code> and links therein. In addition hxsurf objects can
  be converted to the <code><a href='https://www.rdocumentation.org/packages/rgl/topics/mesh3d'>mesh3d</a></code> format, which provides a link
  to the <code><a href='https://www.rdocumentation.org/packages/rgl/topics/rgl-package'>rgl</a></code> package and also to packages for 
  morphometrics and sophisticated mesh manipulation such as 
  <a href='https://cran.r-project.org/package=Morpho'>Morpho</a> and 
  <a href='https://cran.r-project.org/package=Rvcg'>Rvcg</a>.</p>
    
    <h2 class="hasAnchor" id="rgl-package"><a class="anchor" href="#rgl-package"></a>rgl Package</h2>

    <p><b>nat</b> uses the <b><code><a href='https://www.rdocumentation.org/packages/rgl/topics/rgl-package'>rgl</a></code></b>
  package extensively for 3D visualisation. <code>rgl</code>'s core function is to
  provide interactive visualisation (usually in an X11 window depending on
  OpenGL - and therefore on a graphics card or OpenGL software emulator) but
  recently significant functionality for static snapshots and embedding
  results in reports such as web pages has been added. With this in mind,
  Duncan Murdoch has added the <code><a href='https://www.rdocumentation.org/packages/rgl/topics/rgl.useNULL'>rgl.useNULL</a></code> option. As of
  nat 1.8.0, <code><a href='https://www.rdocumentation.org/packages/base/topics/options'>options(rgl.useNULL=TRUE)</a></code> will be set before nat is
  loaded in non-interactive R sessions. If you want to use nat in interactive
  environments where X11 is not available, you may want to set
  <code><a href='https://www.rdocumentation.org/packages/base/topics/options'>options(rgl.useNULL=TRUE)</a></code> manually before loading nat.</p>
    
    <h2 class="hasAnchor" id="file-formats"><a class="anchor" href="#file-formats"></a>File Formats</h2>

    <p><b>nat</b> supports multiple input and output data 
  formats for the object classes. There is a registry-based mechanism which 
  allows support for reading or writing specific file formats (see 
  <code><a href='fileformats.html'>fileformats</a></code>) to be plugged in to reasonably generic functions
  such as <code><a href='read.neurons.html'>read.neurons</a></code>. It is perfectly possible for other R 
  packages or end users to extend the supported list of file types by 
  registering new read/write or identification functions.</p>
    
    <h2 class="hasAnchor" id="package-options"><a class="anchor" href="#package-options"></a>Package Options</h2>

    <p>The following options can be set to specify default
  behaviour.</p>  
<p></p><ul>
<li><p><code>nat.cmtk.bindir</code> Location of CMTK binaries. See 
  <code><a href='cmtk.bindir.html'>cmtk.bindir</a></code></p></li>
<li><p><code>nat.default.neuronlist</code> A character string naming a
  neuronlist to use with the <code><a href='plot3d.neuronlist.html'>plot3d.character</a></code> method</p></li>
<li><p><code>nat.progress</code> The default progress reporter to use with 
  <code><a href='nlapply.html'>nlapply</a></code>. See <code><a href='https://www.rdocumentation.org/packages/plyr/topics/create_progress_bar'>create_progress_bar</a></code> for 
  possible values. When unset is equivalent to special value <code>'auto'</code>. 
  To suppress altogether, use <code>nat.progress="none"</code>.</p></li>
</ul>
    <p>In addition there is one read-only option:</p><ul>
<li><p><code>nat.cmtk.version</code> which is used to store the current cmtk 
  version when there are repeated calls to <code><a href='cmtk.version.html'>cmtk.version</a></code>.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='neuron.html'>neuron</a></code>, <code><a href='dotprops.html'>dotprops</a></code>, 
  <code><a href='neuronlist.html'>neuronlist</a></code>, <code><a href='nlapply.html'>nlapply</a></code>, <code><a href='plot3d.html'>plot3d</a></code>,
  <code><a href='xform.html'>xform</a></code>, <code><a href='im3d.html'>im3d</a></code>, <code><a href='read.hxsurf.html'>read.hxsurf</a></code>,
  <code>rgl</code> which is used for visualisation,
  <code><a href='fileformats.html'>fileformats</a></code>, <code><a href='read.neurons.html'>read.neurons</a></code>, <code><a href='cmtk.bindir.html'>cmtk</a></code>.</p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#neuron-objects">Neuron Objects</a></li>

      <li><a href="#collections-of-neurons">Collections of Neurons</a></li>

      <li><a href="#transformations">Transformations</a></li>

      <li><a href="#-d-image-data">3D Image Data</a></li>

      <li><a href="#surface-data">Surface Data</a></li>

      <li><a href="#rgl-package">rgl Package</a></li>

      <li><a href="#file-formats">File Formats</a></li>

      <li><a href="#package-options">Package Options</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Gregory Jefferis, James Manton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

